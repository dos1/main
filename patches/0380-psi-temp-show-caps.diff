--- a/src/gcuserview.cpp
+++ b/src/gcuserview.cpp
@@ -557,8 +557,8 @@ bool GCUserView::maybeTip(const QPoint &pos)
 	UserResource ur;
 	ur.setName(nick);
 	ur.setStatus(s);
-	//ur.setClient(client_name,client_version,"");
-	ur.setClient(QString(),QString(),"");
+	ur.setClient(client_name,client_version,"");
+	//ur.setClient(QString(),QString(),"");
 	u.userResourceList().append(ur);
 	u.setPrivate(true);
 	u.setAvatarFactory(dlg->account()->avatarFactory());
--- a/src/psiaccount.cpp
+++ b/src/psiaccount.cpp
@@ -2532,6 +2532,8 @@ void PsiAccount::client_resourceAvailable(const Jid &j, const Resource &r)
 			//ur.setSecurityEnabled(true);
 			if(local)
 				ur.setClient(ApplicationInfo::name(),ApplicationInfo::version(),SystemInfo::instance()->os());
+			else
+				ur.setClient(capsManager()->clientName(j),capsManager()->clientVersion(j),"");
 
 			u->userResourceList().append(ur);
 			rp = &u->userResourceList().last();
@@ -2601,8 +2603,8 @@ void PsiAccount::client_resourceAvailable(const Jid &j, const Resource &r)
 		foreach(UserListItem* u, findRelevant(j)) {
 			UserResourceList::Iterator rit = u->userResourceList().find(j.resource());
 			if (rit != u->userResourceList().end()) {
-				//(*rit).setClient(capsManager()->clientName(j),capsManager()->clientVersion(j),"");
-				(*rit).setClient(QString(),QString(),"");
+				(*rit).setClient(capsManager()->clientName(j),capsManager()->clientVersion(j),"");
+				//(*rit).setClient(QString(),QString(),"");
 				cpUpdate(*u,(*rit).name());
 			}
 		}
@@ -3155,8 +3157,8 @@ void PsiAccount::capsChanged(const Jid& j)
 		bool found = (rit == u->userResourceList().end()) ? false: true;
 		if(!found)
 			continue;
-		//(*rit).setClient(name,version,"");
-		(*rit).setClient(QString(),QString(),"");
+		(*rit).setClient(name,version,"");
+		//(*rit).setClient(QString(),QString(),"");
 		cpUpdate(*u);
 	}
 }
